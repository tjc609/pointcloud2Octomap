<launch>
  <!-- 添加静态坐标转换 -->
  <node pkg="tf2_ros" type="static_transform_publisher" name="map_to_camera_link" 
        args="0 0 0 0 0 0 map camera_link" />

  <node pkg="octomap_server" type="octomap_server_node" name="octomap_server">
    <!-- 分辨率设置 -->
    <param name="resolution" value="0.05" />
    
    <!-- 使用map作为固定坐标系 -->
    <param name="frame_id" type="string" value="map" />
    <param name="base_frame_id" type="string" value="camera_link" />
    
    <!-- 传感器参数设置 -->
    <param name="sensor_model/max_range" value="10.0" />
    <param name="latch" value="true" />
    <param name="pointcloud_max_z" value="3.0" />
    <param name="pointcloud_min_z" value="-1.0" />
    
    <!-- 话题重映射 -->
    <remap from="/cloud_in" to="/yolov5/detection_pointcloud" />

    <!-- 启用调试输出 -->
    <param name="filter_ground" value="false" />
    <param name="occupancy_min_z" value="-1.0" />
    <param name="occupancy_max_z" value="3.0" />
  </node>
</launch>